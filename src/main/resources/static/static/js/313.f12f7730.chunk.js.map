{"version":3,"file":"static/js/313.f12f7730.chunk.js","mappings":"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","sources":["pages/main/MainMorePage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { getMoreProduct, getProdListCount } from \"../../api/main/mainMore_api\";\r\nimport { SideBar } from \"../../components/SideBar\";\r\nimport Like from \"../../components/details/Like\";\r\nimport JoinPopUp, {\r\n  ModalBackground,\r\n} from \"../../components/joinpopup/JoinPopUp\";\r\nimport useCustomLogin from \"../../hooks/useCustomLogin\";\r\nimport Layout from \"../../layouts/Layout\";\r\nimport { PaginationBlue } from \"../../styles/free/FreePageStyle\";\r\nimport { MoreWrap } from \"../../styles/main/mainMoreStyle\";\r\n\r\nconst region = [\r\n  {\r\n    title: \"대구광역시\",\r\n    list: [\r\n      \"전체\",\r\n      \"달서구\",\r\n      \"중구\",\r\n      \"동구\",\r\n      \"서구\",\r\n      \"남구\",\r\n      \"북구\",\r\n      \"수성구\",\r\n      \"달성군\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"서울특별시\",\r\n    list: [\r\n      \"전체\",\r\n      \"종로구\",\r\n      \"중구\",\r\n      \"용산구\",\r\n      \"성동구\",\r\n      \"광진구\",\r\n      \"동대문구\",\r\n      \"중랑구\",\r\n      \"성북구\",\r\n      \"강북구\",\r\n      \"도봉구\",\r\n      \"노원구\",\r\n      \"은평구\",\r\n      \"서대문구\",\r\n      \"마포구\",\r\n      \"양천구\",\r\n      \"강서구\",\r\n      \"구로구\",\r\n      \"금천구\",\r\n      \"영등포구\",\r\n      \"동작구\",\r\n      \"관악구\",\r\n      \"서초구\",\r\n      \"강남구\",\r\n      \"송파구\",\r\n      \"강동구\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"부산광역시\",\r\n    list: [\r\n      \"전체\",\r\n      \"중구\",\r\n      \"서구\",\r\n      \"동구\",\r\n      \"영도구\",\r\n      \"부산진구\",\r\n      \"동래구\",\r\n      \"남구\",\r\n      \"북구\",\r\n      \"해운대구\",\r\n      \"사하구\",\r\n      \"금정구\",\r\n      \"강서구\",\r\n      \"연제구\",\r\n      \"수영구\",\r\n      \"사상구\",\r\n      \"기장군\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"인천광역시\",\r\n    list: [\r\n      \"전체\",\r\n      \"중구\",\r\n      \"동구\",\r\n      \"미추홀구\",\r\n      \"연수구\",\r\n      \"남동구\",\r\n      \"부평구\",\r\n      \"계양구\",\r\n      \"서구\",\r\n    ],\r\n  },\r\n  {\r\n    title: \"광주광역시\",\r\n    list: [\"전체\", \"동구\", \"서구\", \"남구\", \"북구\", \"광산구\"],\r\n  },\r\n  {\r\n    title: \"대전광역시\",\r\n    list: [\"전체\", \"동구\", \"중구\", \"서구\", \"유성구\", \"대덕구\"],\r\n  },\r\n  {\r\n    title: \"울산광역시\",\r\n    list: [\"전체\", \"중구\", \"남구\", \"동구\", \"북구\"],\r\n  },\r\n];\r\n\r\nconst MainMorePage = () => {\r\n  const navigate = useNavigate(`/details/`); // useNavigate 훅을 사용하여 navigate 함수 가져오기\r\n\r\n  const location = useLocation();\r\n  const { pathname, state } = location;\r\n  const { title } = location.state || {};\r\n  // const urlParseArr = pathname.split(\"/\");\r\n  // const parseMainCategory = parseInt(urlParseArr[3]);\r\n  // const parseSubCategory = parseInt(urlParseArr[4]);\r\n  const searchValue = sessionStorage.getItem(\"searchValue\");\r\n  const searchParams = new URLSearchParams(location.search);\r\n  const parseMainCategory = parseInt(searchParams.get(\"mc\"));\r\n  const parseSubCategory = parseInt(searchParams.get(\"sc\"));\r\n\r\n  const [addr, setAddr] = useState(\"\");\r\n  const [totalPage, setTotalPage] = useState(null);\r\n\r\n\r\n  // 페이지 번호\r\n  const [pageNum, setPageNum] = useState(1);\r\n  const [sortType, setSortType] = useState(0);\r\n  // 전지역 데이터\r\n  const [datas, setDatas] = useState([]);\r\n  // 지역별 시, 구 분류 데이터\r\n  const [filterData, setFilterData] = useState([]);\r\n  // 지역 선택 관리\r\n  const [regionNum, setRegionNum] = useState(null);\r\n  const [districtNum, setDistrictNum] = useState(null);\r\n\r\n  const fetchData = async (pageNum, _sortType) => {\r\n    try {\r\n      const res = await getMoreProduct(\r\n        pageNum,\r\n        parseMainCategory,\r\n        parseSubCategory,\r\n        _sortType,\r\n      );\r\n      setDatas(res);\r\n      console.log(res);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleRegionChange = e => {\r\n    if (e.target.value === \"전체\") {\r\n      setRegionNum(null);\r\n    } else {\r\n      const regionIndex = region.findIndex(\r\n        item => item.title === e.target.value,\r\n      );\r\n      setRegionNum(regionIndex);\r\n    }\r\n    setDistrictNum(null);\r\n  };\r\n\r\n  const regionFilter = e => {\r\n    const selectedRegion = e.target.value;\r\n    const districtIndex = region[regionNum].list.indexOf(selectedRegion);\r\n    setDistrictNum(districtIndex);\r\n  };\r\n\r\n  const handlePageChange = _tempPage => {\r\n    setPageNum(_tempPage);\r\n  };\r\n\r\n  const listCountData = async () => {\r\n    await getProdListCount(\r\n      // searchValue,\r\n      parseMainCategory,\r\n      parseSubCategory,\r\n      addr,\r\n      // successFn,\r\n      // errorFn,\r\n      setTotalPage,\r\n    );\r\n  };\r\n  useEffect(() => {\r\n    listCountData();\r\n  }, [parseMainCategory, parseSubCategory, addr]);\r\n\r\n  // details 페이지로 이동\r\n  const { isLogin } = useCustomLogin();\r\n  const [loginState, setLoginState] = useState(false);\r\n\r\n  const handlePageChangeDetails = async _item => {\r\n    if (isLogin) {\r\n      const url = `/details?mc=${_item.categories.mainCategory}&sc=${_item.categories.subCategory}&productId=${_item.iproduct}`;\r\n      const serverData = {\r\n        mainCategoryId: _item.categories.mainCategory,\r\n        subCategoryId: _item.categories.subCategory,\r\n        iproduct: _item.iproduct,\r\n      };\r\n      // console.log(serverData);\r\n      // const res = getProductDetail(serverData);\r\n      navigate(url);\r\n    } else {\r\n      setLoginState(true);\r\n    }\r\n  };\r\n  const closeModal = () => {\r\n    setLoginState(false);\r\n    navigate(`/login`);\r\n  };\r\n\r\n  // 제품 갯수\r\n  // const totalPosts = filterData.length; //최대 16개\r\n\r\n  useEffect(() => {\r\n    if (sortType !== 0) fetchData(pageNum, sortType);\r\n    else fetchData(pageNum);\r\n  }, [pageNum, sortType]);\r\n\r\n  useEffect(() => {\r\n    if (regionNum !== null) {\r\n      const regionData = datas.filter(item =>\r\n        item.addr.includes(region[regionNum].title.slice(0, 2)),\r\n      );\r\n      if (districtNum !== null) {\r\n        const districtData = regionData.filter(item =>\r\n          item.addr.includes(` ${region[regionNum].list[districtNum]}`),\r\n        );\r\n        setFilterData(districtData);\r\n      } else {\r\n        setFilterData(regionData);\r\n      }\r\n    } else {\r\n      setFilterData(datas);\r\n    }\r\n  }, [districtNum, datas, regionNum, pageNum]);\r\n\r\n  return (\r\n    <Layout>\r\n      {loginState && (\r\n        <>\r\n          <JoinPopUp txt=\"로그인 후 이용해주세요.\" onConfirm={closeModal} />\r\n          <ModalBackground></ModalBackground>\r\n        </>\r\n      )}\r\n      <SideBar />\r\n      <MoreWrap>\r\n        <div className=\"header-wrap\">\r\n          <div className=\"header-cate-wrap\">\r\n            <div>{title || \"Default Title\"}</div>\r\n            <div>{totalPage}개</div>\r\n          </div>\r\n          <div>\r\n            <div className=\"bt-wrap\">\r\n              <div>\r\n                <button onClick={() => setSortType(0)}>최신순</button>\r\n                <img src=\"/images/main/line.svg\" />\r\n                <button onClick={() => setSortType(2)}>조회순</button>\r\n              </div>\r\n            </div>\r\n            <div className=\"region-wrap\">\r\n              <select onChange={handleRegionChange} defaultValue=\"전체\">\r\n                <option>전체</option>\r\n                {region.map((item, index) => {\r\n                  return (\r\n                    <option key={`regionTitle${index}`}>{item.title}</option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <select\r\n                onChange={e => regionFilter(e)}\r\n                value={\r\n                  regionNum !== null && region[regionNum].list[districtNum]\r\n                }\r\n                disabled={regionNum === null}\r\n              >\r\n                {regionNum === null && <option>-</option>}\r\n                {regionNum !== null &&\r\n                  region[regionNum].list.map((item, index) => {\r\n                    return <option key={`regionList${index}`}>{item}</option>;\r\n                  })}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"main-wrap\">\r\n          {filterData &&\r\n            filterData.map((item, index) => (\r\n              <div\r\n                className=\"item-wrap\"\r\n                key={`MainMore-item-${index}`}\r\n\r\n                onClick={() => handlePageChangeDetails(item)}>\r\n\r\n                <div className=\"like-wrap\">\r\n                  <Like\r\n                    isLiked={item.isLiked !== 0 ? true : false}\r\n                    productId={item.iproduct}\r\n                  />\r\n                </div>\r\n                <img\r\n                  className=\"item-image\"\r\n                  src={`/pic/${item.prodMainPic}`}\r\n                  alt=\"제품 이미지\"\r\n                />\r\n                <div className=\"desc-wrap\">\r\n                  <span className=\"desc-title\">{item.title}</span>\r\n                  <hr/>\r\n                  <div className=\"desc-price\">\r\n                    {item.rentalPrice.toLocaleString()}\r\n                  </div>\r\n                  <div className=\"desc-addr\">{item.addr}</div>\r\n                  <div className=\"view\">조회수{item.view}</div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n        <div className=\"pagination\">\r\n          <PaginationBlue\r\n            current={pageNum}\r\n            onChange={handlePageChange}\r\n            total={totalPage}\r\n            pageSize={16}\r\n          />\r\n        </div>\r\n      </MoreWrap>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default MainMorePage;"],"names":["region","title","list","MainMorePage","navigate","useNavigate","location","useLocation","pathname","state","searchParams","sessionStorage","getItem","URLSearchParams","search","parseMainCategory","parseInt","get","parseSubCategory","addr","setAddr","useState","totalPage","setTotalPage","pageNum","setPageNum","sortType","setSortType","datas","setDatas","filterData","setFilterData","regionNum","setRegionNum","districtNum","setDistrictNum","fetchData","async","_sortType","res","getMoreProduct","console","log","error","useEffect","getProdListCount","listCountData","isLogin","useCustomLogin","loginState","setLoginState","regionData","filter","item","includes","slice","districtData","concat","_jsxs","Layout","children","_Fragment","_jsx","JoinPopUp","txt","onConfirm","closeModal","ModalBackground","SideBar","MoreWrap","className","onClick","src","onChange","e","target","value","regionIndex","findIndex","defaultValue","map","index","selectedRegion","districtIndex","indexOf","regionFilter","disabled","url","_item","categories","mainCategory","subCategory","iproduct","handlePageChangeDetails","Like","isLiked","productId","prodMainPic","alt","rentalPrice","toLocaleString","view","PaginationBlue","current","_tempPage","total","pageSize"],"sourceRoot":""}